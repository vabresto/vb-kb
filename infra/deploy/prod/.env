# Public hosts served by the bundled Traefik.
VB_KB_HOST=kb.example.com
VB_KC_HOST=auth-kb.example

# Absolute path to checked-out repo on host (must include .git and data/).
VB_KB_REPO_PATH=/srv/vb-kb

# Traefik TLS automation (Let's Encrypt HTTP challenge).
TRAEFIK_ACME_EMAIL=ops@example.com
TRAEFIK_DASHBOARD_ENABLED=false

# Keycloak bootstrap values.
# Prod uses runtime provisioning (`keycloak-init`) and does not import a git-tracked
# realm file with credentials. Put real secrets in `.env.local` (gitignored).
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=change-me-admin-password
KEYCLOAK_REALM=vb-kb
KEYCLOAK_CLIENT_ID=vb-kb-mcp-confidential
KEYCLOAK_CLIENT_SECRET=change-me-vb-kb-client-secret
KEYCLOAK_CLIENT_NAME=VB KB MCP Confidential
KC_HOSTNAME=https://auth-kb.example
KC_HOSTNAME_STRICT=true

# MCP OAuth mode: in-memory, external-jwt, or off.
KB_MCP_OAUTH_MODE=external-jwt

# Optional additional per-tool shared token gate (usually leave empty for OAuth clients).
KB_MCP_AUTH_TOKEN=

# external-jwt mode only: authorization server URL(s), comma-separated.
KB_MCP_EXTERNAL_AUTHORIZATION_SERVERS=https://auth-kb.example/realms/vb-kb

# external-jwt mode only: configure exactly one verifier key source.
# Using the bundled Keycloak service internally is recommended for this stack.
KB_MCP_EXTERNAL_JWT_JWKS_URI=https://auth-kb.example/realms/vb-kb/protocol/openid-connect/certs
KB_MCP_EXTERNAL_JWT_PUBLIC_KEY=

# external-jwt mode optional claim validation.
KB_MCP_EXTERNAL_JWT_ISSUER=https://auth-kb.example/realms/vb-kb
KB_MCP_EXTERNAL_JWT_AUDIENCE=vb-kb-mcp-confidential
KB_MCP_EXTERNAL_JWT_ALGORITHM=RS256

# external-jwt mode optional scope config (comma or space separated).
KB_MCP_EXTERNAL_REQUIRED_SCOPES=
KB_MCP_EXTERNAL_SCOPES_SUPPORTED=

# Docs auth for Traefik BasicAuth.
# Example format:
# DOCS_BASIC_AUTH_USERS=admin:$$2y$$05$$9Q......
DOCS_BASIC_AUTH_USERS=admin:replace-with-htpasswd-hash
